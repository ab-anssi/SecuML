

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>DIADEM: DIAgnosis of DEtection Models &mdash; SecuML  documentation</title>
  

  
  
  
  

  
  <script type="text/javascript" src="_static/js/modernizr.min.js"></script>
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
        <script type="text/javascript" src="_static/jquery.js"></script>
        <script type="text/javascript" src="_static/underscore.js"></script>
        <script type="text/javascript" src="_static/doctools.js"></script>
        <script type="text/javascript" src="_static/language_data.js"></script>
        <script async="async" type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/latest.js?config=TeX-AMS-MML_HTMLorMML"></script>
    
    <script type="text/javascript" src="_static/js/theme.js"></script>

    

  
  <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="ILAB: Interactive LABeling" href="SecuML.ILAB.html" />
    <link rel="prev" title="Experiments" href="SecuML.Experiments.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="index.html" class="icon icon-home"> SecuML
          

          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">Getting Started</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="getting_started.setting_up.html">Seeting up SecuML</a></li>
<li class="toctree-l1"><a class="reference internal" href="getting_started.lingspam.html">Use Case: Spam Detection</a></li>
</ul>
<p class="caption"><span class="caption-text">Data and Experiments</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="SecuML.Data.html">Data</a></li>
<li class="toctree-l1"><a class="reference internal" href="SecuML.SpecificVisu.html">Visualization of Individual Instances</a></li>
<li class="toctree-l1"><a class="reference internal" href="SecuML.Experiments.html">Experiments</a></li>
</ul>
<p class="caption"><span class="caption-text">Available Experiments</span></p>
<ul class="current">
<li class="toctree-l1 current"><a class="current reference internal" href="#">DIADEM: DIAgnosis of DEtection Models</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#usage">Usage</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#model-classes">Model Classes</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#supervised-model-classes">Supervised Model Classes</a></li>
<li class="toctree-l4"><a class="reference internal" href="#unsupervised-model-classes">Unsupervised Model Classes</a></li>
<li class="toctree-l4"><a class="reference internal" href="#semi-supervised-model-classes">Semi-supervised Model Classes</a></li>
<li class="toctree-l4"><a class="reference internal" href="#applying-a-previous-detection-model">Applying a Previous Detection Model</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#hyperparameters">Hyperparameters</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#hyperparameters-values">Hyperparameters Values</a></li>
<li class="toctree-l4"><a class="reference internal" href="#automatic-selection">Automatic Selection</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#validation-modes">Validation Modes</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#random-split">Random Split</a></li>
<li class="toctree-l4"><a class="reference internal" href="#temporal-split">Temporal Split</a></li>
<li class="toctree-l4"><a class="reference internal" href="#cutoff-time">Cutoff Time</a></li>
<li class="toctree-l4"><a class="reference internal" href="#cross-validation">Cross Validation</a></li>
<li class="toctree-l4"><a class="reference internal" href="#temporal-cross-validation">Temporal Cross Validation</a></li>
<li class="toctree-l4"><a class="reference internal" href="#sliding-window">Sliding Window</a></li>
<li class="toctree-l4"><a class="reference internal" href="#validation-dataset">Validation Dataset</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#graphical-user-interface">Graphical User Interface</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#model-performance-and-predictions">Model Performance and Predictions</a></li>
<li class="toctree-l3"><a class="reference internal" href="#model-behavior">Model Behavior</a></li>
<li class="toctree-l3"><a class="reference internal" href="#individual-predictions">Individual Predictions</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="SecuML.ILAB.html">ILAB: Interactive LABeling</a></li>
<li class="toctree-l1"><a class="reference internal" href="SecuML.RCD.html">Rare Category Detection</a></li>
<li class="toctree-l1"><a class="reference internal" href="SecuML.clustering.html">Clustering</a></li>
<li class="toctree-l1"><a class="reference internal" href="SecuML.projection.html">Projection</a></li>
<li class="toctree-l1"><a class="reference internal" href="SecuML.stats.html">Features Analysis</a></li>
</ul>
<p class="caption"><span class="caption-text">Miscellaneous</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="miscellaneous.detection_perf.html">Detection Performance Metrics</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">SecuML</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="index.html">Docs</a> &raquo;</li>
        
      <li>DIADEM: DIAgnosis of DEtection Models</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="_sources/SecuML.DIADEM.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="diadem-diagnosis-of-detection-models">
<span id="diadem"></span><h1>DIADEM: DIAgnosis of DEtection Models<a class="headerlink" href="#diadem-diagnosis-of-detection-models" title="Permalink to this headline">¶</a></h1>
<p><strong>Training and Analysing a Detection Model before Deployment.</strong></p>
<p>DIADEM trains and evaluates detection models
(<a class="reference internal" href="#diadem-supervised"><span class="std std-ref">supervised</span></a>,
<a class="reference internal" href="#diadem-semisupervised"><span class="std std-ref">semi-supervised</span></a> and
<a class="reference internal" href="#diadem-unsupervised"><span class="std std-ref">unsupervised</span></a>).
It hides some of the machine learning machinery
(feature standardization,
<a class="reference internal" href="#diadem-hyperparameters"><span class="std std-ref">setting of the hyperparameters</span></a>)
to let security experts focus mainly on detection.
Besides, it comes with a <a class="reference internal" href="#diadem-gui"><span class="std std-ref">graphical user interface</span></a> to
evaluate and diagnose detection models.</p>
<p class="rubric">References</p>
<ul class="simple">
<li><p>Beaugnon, Anaël, and Pierre Chifflier. <a class="reference external" href="https://www.ssi.gouv.fr/uploads/2018/11/machine-learning-for-computer-security-abeaugnon-pchifflier-anssi-.pdf">“Machine Learning for Computer Security Detection Systems: Practical Feedback and Solutions”</a>, C&amp;ESAR 2018.</p></li>
<li><p>Beaugnon, Anaël. <a class="reference external" href="https://www.ssi.gouv.fr/uploads/2018/06/beaugnon-a_these_manuscrit.pdf">“Expert-in-the-Loop Supervised Learning for Computer Security Detection Systems.”</a>, Ph.D. thesis, École Normale Superieure (2018).</p></li>
<li><p>[FRENCH] Bonneton, Anaël, and Antoine Husson, <a class="reference external" href="https://www.sstic.org/media/SSTIC2017/SSTIC-actes/le_machine_learning_confront_aux_contraintes_oprat/SSTIC2017-Article-le_machine_learning_confront_aux_contraintes_oprationnelles_des_systmes_de_dtection-bonneton_husson.pdf">“Le Machine Learning confronté aux contraintes opérationnelles des systèmes de détection”</a>, SSTIC 2017.</p></li>
</ul>
<div class="section" id="usage">
<h2>Usage<a class="headerlink" href="#usage" title="Permalink to this headline">¶</a></h2>
<div class="line-block">
<div class="line"><strong>Semi-supervised and supervised model classes:</strong></div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">SecuML_DIADEM</span> <span class="pre">&lt;project&gt;</span> <span class="pre">&lt;dataset&gt;</span> <span class="pre">&lt;model_class&gt;</span> <span class="pre">-a</span> <span class="pre">&lt;annotations_file&gt;</span></code>.</div>
</div>
<div class="line-block">
<div class="line"><strong>Unsupervised model classes:</strong></div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">SecuML_DIADEM</span> <span class="pre">&lt;project&gt;</span> <span class="pre">&lt;dataset&gt;</span> <span class="pre">&lt;model_class&gt;</span></code>.</div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>These arguments are enough to launch DIADEM on a given dataset.
The parameters presented below are completely optional.</p>
</div>
<p>The following sections present the <a class="reference internal" href="#diadem-model-classes"><span class="std std-ref">model classes available</span></a>, and some <strong>optional parameters</strong> for
<a class="reference internal" href="#diadem-hyperparameters"><span class="std std-ref">setting the hyperparameters</span></a>
and <a class="reference internal" href="#diadem-validation-modes"><span class="std std-ref">selecting a specific validation mode</span></a>.
If these parameters are not provided,
DIADEM uses default values for the hyperparameters, and splits the input
dataset into a training (90%) and a validation dataset (10%).</p>
<div class="section" id="model-classes">
<span id="diadem-model-classes"></span><h3>Model Classes<a class="headerlink" href="#model-classes" title="Permalink to this headline">¶</a></h3>
<div class="section" id="supervised-model-classes">
<span id="diadem-supervised"></span><h4>Supervised Model Classes<a class="headerlink" href="#supervised-model-classes" title="Permalink to this headline">¶</a></h4>
<ul class="simple">
<li><p>LogisticRegression (<a class="reference external" href="https://scikit-learn.org/stable/modules/generated/sklearn.linear_model.LogisticRegression.html">scikit-learn documentation</a>)</p></li>
<li><p>Svc (<a class="reference external" href="https://scikit-learn.org/stable/modules/generated/sklearn.svm.SVC.html">scikit-learn documentation</a>)</p></li>
<li><p>GaussianNaiveBayes (<a class="reference external" href="https://scikit-learn.org/stable/modules/generated/sklearn.naive_bayes.GaussianNB.html">scikit-learn documentation</a>)</p></li>
<li><p>DecisionTree (<a class="reference external" href="https://scikit-learn.org/stable/modules/generated/sklearn.tree.DecisionTreeClassifier.html#sklearn.tree.DecisionTreeClassifier">scikit-learn documentation</a>)</p></li>
<li><p>RandomForest (<a class="reference external" href="https://scikit-learn.org/stable/modules/generated/sklearn.ensemble.RandomForestClassifier.html">scikit-learn documentation</a>)</p></li>
<li><p>GradientBoosting (<a class="reference external" href="https://scikit-learn.org/stable/modules/generated/sklearn.ensemble.GradientBoostingClassifier.html">scikit-learn documentation</a>)</p></li>
</ul>
</div>
<div class="section" id="unsupervised-model-classes">
<span id="diadem-unsupervised"></span><h4>Unsupervised Model Classes<a class="headerlink" href="#unsupervised-model-classes" title="Permalink to this headline">¶</a></h4>
<ul class="simple">
<li><p>Lof (<a class="reference external" href="https://scikit-learn.org/stable/modules/generated/sklearn.neighbors.LocalOutlierFactor.html">scikit-learn documentation</a>)</p></li>
<li><p>IsolationForest (<a class="reference external" href="https://scikit-learn.org/stable/modules/generated/sklearn.ensemble.IsolationForest.html">scikit-learn documentation</a>)</p></li>
<li><p>OneClassSvm (<a class="reference external" href="https://scikit-learn.org/stable/modules/generated/sklearn.svm.OneClassSVM.html">scikit-learn documentation</a>)</p></li>
<li><p>EllipticEnvelope (<a class="reference external" href="https://scikit-learn.org/stable/modules/generated/sklearn.covariance.EllipticEnvelope.html">scikit-learn documentation</a>)</p></li>
</ul>
</div>
<div class="section" id="semi-supervised-model-classes">
<span id="diadem-semisupervised"></span><h4>Semi-supervised Model Classes<a class="headerlink" href="#semi-supervised-model-classes" title="Permalink to this headline">¶</a></h4>
<ul class="simple">
<li><p>LabelPropagation (<a class="reference external" href="https://scikit-learn.org/stable/modules/generated/sklearn.semi_supervised.LabelPropagation.html">scikit-learn documentation</a>)</p></li>
<li><p>Sssvdd (new implementation)</p></li>
</ul>
<div class="line-block">
<div class="line">For more information about the available options for a given model class:</div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">SecuML_DIADEM</span> <span class="pre">&lt;project&gt;</span> <span class="pre">&lt;dataset&gt;</span> <span class="pre">&lt;model_class&gt;</span> <span class="pre">-h</span></code>.</div>
</div>
</div>
<div class="section" id="applying-a-previous-detection-model">
<h4>Applying a Previous Detection Model<a class="headerlink" href="#applying-a-previous-detection-model" title="Permalink to this headline">¶</a></h4>
<p>DIADEM can apply a previously trained detection model with the following
command line:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>SecuML_DIADEM &lt;project&gt; &lt;dataset&gt; AlreadyTrained --model-exp-id &lt;exp_id&gt; <span class="se">\</span>
    --validation-mode ValidationDataset --validation-dataset &lt;validation_dataset&gt;
</pre></div>
</div>
<p>In this case, there are two restrictions:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">--model-exp-id</span></code> must correspond to a
<a class="reference internal" href="#diadem"><span class="std std-ref">DIADEM</span></a> or an <a class="reference internal" href="SecuML.ILAB.html#ilab"><span class="std std-ref">ILAB</span></a> experiment ;</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">ValidationDataset</span></code> is the only <a class="reference internal" href="#diadem-validation-modes"><span class="std std-ref">validation mode</span></a>
available.</p></li>
</ul>
</div>
</div>
<div class="section" id="hyperparameters">
<span id="diadem-hyperparameters"></span><h3>Hyperparameters<a class="headerlink" href="#hyperparameters" title="Permalink to this headline">¶</a></h3>
<p>Some model classes have <em>hyperparameters</em>, i.e. parameters that must be set
before the training phase. These parameters are not fit automatically
by the training algorithm.</p>
<p>For example, logistic regression has two hyperparameters: the regularization
strength, <code class="docutils literal notranslate"><span class="pre">--regularization</span></code>, and the penalty norm, <code class="docutils literal notranslate"><span class="pre">--penalty</span></code>.
The number of trees, <code class="docutils literal notranslate"><span class="pre">--n-estimators</span></code>, is one hyperparameter of random
forests among many others.</p>
<div class="section" id="hyperparameters-values">
<h4>Hyperparameters Values<a class="headerlink" href="#hyperparameters-values" title="Permalink to this headline">¶</a></h4>
<p>To list the hyperparameters of a given detection model see the
<em>Hyperparameters</em> group of the help message displayed by
<code class="docutils literal notranslate"><span class="pre">SecuML_DIADEM</span> <span class="pre">&lt;project&gt;</span> <span class="pre">&lt;dataset&gt;</span> <span class="pre">&lt;model_class&gt;</span> <span class="pre">-h</span></code>.
For each hyperparameter, the help message displays its name and its default
value.</p>
<p>Semi-supervised and unsupervised model classes accept only a single value
for each hyperparameter. On the contrary, supervised model classes
accept a list of values for each hyperparameter, and the best combination
of hyperparameters is selected automatically with a grid-search.</p>
</div>
<div class="section" id="automatic-selection">
<h4>Automatic Selection<a class="headerlink" href="#automatic-selection" title="Permalink to this headline">¶</a></h4>
<p>In the case of supervised model classes, DIADEM selects the best combination
of hyperparameters automatically. It considers all the combinations
of hyperparameters values in a <em>grid search</em> to find the best one.
First, DIADEM evaluates the performance (through <a class="reference internal" href="#cv"><span class="std std-ref">cross-validation</span></a>)
of the detection model trained with each combination, then it selects the one
that results in the best-performing detection model.</p>
<p>DIADEM allows to parametrize the grid search:</p>
<ul class="simple">
<li><p>[optional] <code class="docutils literal notranslate"><span class="pre">--num-folds</span></code>: number of folds built in the cross-validation (default: 4);</p></li>
<li><p>[optional] <code class="docutils literal notranslate"><span class="pre">--n-jobs</span></code>:  number of CPU cores used when parallelizing the cross-validation, -1 means using all cores (default: -1);</p></li>
<li><p>[optional] <code class="docutils literal notranslate"><span class="pre">--objective-func</span></code>: the performance indicator (<code class="docutils literal notranslate"><span class="pre">Ndcg</span></code>, <code class="docutils literal notranslate"><span class="pre">RocAuc</span></code>, <code class="docutils literal notranslate"><span class="pre">Accuracy</span></code>, or <code class="docutils literal notranslate"><span class="pre">DrAtFdr</span></code>) to optimize during the grid-search (default: <code class="docutils literal notranslate"><span class="pre">RocAuc</span></code>). ;</p></li>
<li><p>[optional] <code class="docutils literal notranslate"><span class="pre">--far</span></code>: the false alarm rate (far) to consider if <code class="docutils literal notranslate"><span class="pre">--objective-func</span></code> is set to <code class="docutils literal notranslate"><span class="pre">DrAtFdr</span></code>.</p></li>
</ul>
<p>These options are listed in the <em>Hyperparameters Optimization</em> group of the help
message displayed by
<code class="docutils literal notranslate"><span class="pre">SecuML_DIADEM</span> <span class="pre">&lt;project&gt;</span> <span class="pre">&lt;dataset&gt;</span> <span class="pre">&lt;supervised_model_class&gt;</span> <span class="pre">-h</span></code>.</p>
</div>
</div>
<div class="section" id="validation-modes">
<span id="diadem-validation-modes"></span><h3>Validation Modes<a class="headerlink" href="#validation-modes" title="Permalink to this headline">¶</a></h3>
<p>DIADEM offers several validation modes, i.e. ways to build the training and the
validation datasets.
Temporal validation modes (<a class="reference internal" href="#temporal-split"><span class="std std-ref">Temporal Split</span></a>, <a class="reference internal" href="#cutoff-time"><span class="std std-ref">Cutoff Time</span></a>,
<a class="reference internal" href="#temporal-cv"><span class="std std-ref">Temporal Cross Validation</span></a>, and <a class="reference internal" href="#sliding-window"><span class="std std-ref">Sliding Window</span></a>) should be preferred when
the instances are timestamped since they better reflect real-world conditions.
These validation modes ensure that no instance from the future is used when the
detection model is trained:
the training instances predate the validation instances.</p>
<div class="section" id="random-split">
<span id="id1"></span><h4>Random Split<a class="headerlink" href="#random-split" title="Permalink to this headline">¶</a></h4>
<p><code class="docutils literal notranslate"><span class="pre">--validation-mode</span> <span class="pre">RandomSplit</span> <span class="pre">--test-size</span> <span class="pre">&lt;prop&gt;</span></code></p>
<p><code class="docutils literal notranslate"><span class="pre">&lt;prop&gt;</span></code> instances of <code class="docutils literal notranslate"><span class="pre">&lt;dataset&gt;</span></code> are selected uniformly for the validation
dataset. The remaining instances constitute the training dataset.</p>
</div>
<div class="section" id="temporal-split">
<span id="id2"></span><h4>Temporal Split<a class="headerlink" href="#temporal-split" title="Permalink to this headline">¶</a></h4>
<p><code class="docutils literal notranslate"><span class="pre">--validation-mode</span> <span class="pre">TemporalSplit</span> <span class="pre">--test-size</span> <span class="pre">&lt;prop&gt;</span></code></p>
<p>The <code class="docutils literal notranslate"><span class="pre">&lt;prop&gt;</span></code> most recent instances of <code class="docutils literal notranslate"><span class="pre">&lt;dataset&gt;</span></code> are selected for the
validation dataset. The remaining instances constitute the training dataset.</p>
</div>
<div class="section" id="cutoff-time">
<span id="id3"></span><h4>Cutoff Time<a class="headerlink" href="#cutoff-time" title="Permalink to this headline">¶</a></h4>
<p><code class="docutils literal notranslate"><span class="pre">--validation-mode</span> <span class="pre">CutoffTime</span> <span class="pre">--cutoff-time</span> <span class="pre">&lt;cutoff_time&gt;</span></code></p>
<p>The instances of <code class="docutils literal notranslate"><span class="pre">&lt;dataset&gt;</span></code> with a timestamp before <code class="docutils literal notranslate"><span class="pre">&lt;cutoff_time&gt;</span></code>
constitutes the training dataset, and the instances after constitute the
validation dataset.
<code class="docutils literal notranslate"><span class="pre">&lt;cutoff_time&gt;</span></code> must be formatted as follows:
<code class="docutils literal notranslate"><span class="pre">YYYY-MM-DD</span> <span class="pre">HH:MM:SS</span></code>.</p>
</div>
<div class="section" id="cross-validation">
<span id="cv"></span><h4>Cross Validation<a class="headerlink" href="#cross-validation" title="Permalink to this headline">¶</a></h4>
<p><code class="docutils literal notranslate"><span class="pre">--validation-mode</span> <span class="pre">Cv</span> <span class="pre">--validation-folds</span> <span class="pre">&lt;num_folds&gt;</span></code></p>
<p>The dataset <code class="docutils literal notranslate"><span class="pre">&lt;dataset&gt;</span></code> is divided uniformly into <code class="docutils literal notranslate"><span class="pre">&lt;num_folds&gt;</span></code> buckets.
Each bucket has approximately the same number
of instances and the same proportion of benign/malicious instances as the whole
dataset.
The detection model is trained <code class="docutils literal notranslate"><span class="pre">&lt;num_folds&gt;</span></code> times: each time, one bucket is
the validation dataset and the other buckets form the training dataset.</p>
<p><em>Example with</em> <span class="math notranslate nohighlight">\(\text{num_folds} = 4\)</span>:</p>
<a class="reference internal image-reference" href="_images/cv.svg"><div align="center" class="align-center"><img alt="_images/cv.svg" src="_images/cv.svg" width="90%" /></div>
</a>
</div>
<div class="section" id="temporal-cross-validation">
<span id="temporal-cv"></span><h4>Temporal Cross Validation<a class="headerlink" href="#temporal-cross-validation" title="Permalink to this headline">¶</a></h4>
<p><code class="docutils literal notranslate"><span class="pre">--validation-mode</span> <span class="pre">TemporalCv</span> <span class="pre">--validation-folds</span> <span class="pre">&lt;num_folds&gt;</span></code></p>
<p>The dataset <code class="docutils literal notranslate"><span class="pre">&lt;dataset&gt;</span></code> is divided into <code class="docutils literal notranslate"><span class="pre">&lt;num_folds&gt;</span> <span class="pre">+</span> <span class="pre">1</span></code> buckets.
Each bucket <span class="math notranslate nohighlight">\(b_{i \in [0,~\text{num_folds}]}\)</span> contains instances
occurring between <span class="math notranslate nohighlight">\(t_i^{max} = T^{min} + i \cdot \Delta\)</span>
and <span class="math notranslate nohighlight">\(t_i^{max} = T^{min} + (i+1) \cdot \Delta\)</span>
where</p>
<ul class="simple">
<li><p><span class="math notranslate nohighlight">\(T^{min}\)</span> and <span class="math notranslate nohighlight">\(T^{max}\)</span> correspond to the timestamps of the oldest and latest instances ;</p></li>
<li><p><span class="math notranslate nohighlight">\(\Delta = \frac{T^{max} - T^{min}}{\text{num_folds} + 1}\)</span>.</p></li>
</ul>
<p>For each fold <span class="math notranslate nohighlight">\(f\in[0,\text{num_folds}-1]\)</span>, the buckets from <span class="math notranslate nohighlight">\(b_0\)</span>
to <span class="math notranslate nohighlight">\(b_f\)</span> constitute the training dataset, and the remaining buckets form
the validation dataset.</p>
<p><em>Example with</em> <span class="math notranslate nohighlight">\(\text{num_folds} = 4\)</span>:</p>
<a class="reference internal image-reference" href="_images/temporal_cv.svg"><div align="center" class="align-center"><img alt="_images/temporal_cv.svg" src="_images/temporal_cv.svg" width="90%" /></div>
</a>
</div>
<div class="section" id="sliding-window">
<span id="id4"></span><h4>Sliding Window<a class="headerlink" href="#sliding-window" title="Permalink to this headline">¶</a></h4>
<p><code class="docutils literal notranslate"><span class="pre">--validation-mode</span> <span class="pre">SlidingWindow</span> <span class="pre">--buckets</span> <span class="pre">&lt;n&gt;</span> <span class="pre">--train-buckets</span> <span class="pre">&lt;n_train&gt;</span> <span class="pre">--test-buckets</span> <span class="pre">&lt;n_test&gt;</span></code></p>
<p>The dataset <code class="docutils literal notranslate"><span class="pre">&lt;dataset&gt;</span></code> is divided into <code class="docutils literal notranslate"><span class="pre">&lt;n&gt;</span></code> buckets
just as in the case of <a class="reference internal" href="#temporal-cv"><span class="std std-ref">Temporal Cross Validation</span></a>.
Each bucket <span class="math notranslate nohighlight">\(b_{i \in [0,~n-1]}\)</span> contains instances
occurring between <span class="math notranslate nohighlight">\(t_i^{max} = T^{min} + i \cdot \Delta\)</span>
and <span class="math notranslate nohighlight">\(t_i^{max} = T^{min} + (i+1) \cdot \Delta\)</span>
where</p>
<ul class="simple">
<li><p><span class="math notranslate nohighlight">\(T^{min}\)</span> and <span class="math notranslate nohighlight">\(T^{max}\)</span> correspond to the timestamps of the oldest and latest instances ;</p></li>
<li><p><span class="math notranslate nohighlight">\(\Delta = \frac{T^{max} - T^{min}}{n}\)</span>.</p></li>
</ul>
<p>For each fold <span class="math notranslate nohighlight">\(f\in[0,n-(n_{train}+n_{test})+1]\)</span>,
the buckets from <span class="math notranslate nohighlight">\(b_{f}\)</span>
to <span class="math notranslate nohighlight">\(b_{f+n_{train}}\)</span> constitute
the training dataset, and the buckets from <span class="math notranslate nohighlight">\(b_{f+n_{train}}\)</span>
to <span class="math notranslate nohighlight">\(b_{f+n_{train}+n_{test}}\)</span>
form the validation dataset.</p>
<p><em>Example with</em> <span class="math notranslate nohighlight">\(n = 5\)</span>, <span class="math notranslate nohighlight">\(n_{train} = 2\)</span> and <span class="math notranslate nohighlight">\(n_{test} = 1\)</span>.</p>
<a class="reference internal image-reference" href="_images/sliding_window.svg"><div align="center" class="align-center"><img alt="_images/sliding_window.svg" src="_images/sliding_window.svg" width="90%" /></div>
</a>
</div>
<div class="section" id="validation-dataset">
<span id="id5"></span><h4>Validation Dataset<a class="headerlink" href="#validation-dataset" title="Permalink to this headline">¶</a></h4>
<p><code class="docutils literal notranslate"><span class="pre">--validation-mode</span> <span class="pre">ValidationDatasets</span> <span class="pre">--validation-datasets</span> <span class="pre">&lt;validation_datasets&gt;</span></code></p>
<p>The whole dataset <code class="docutils literal notranslate"><span class="pre">&lt;dataset&gt;</span></code> constitutes the training data, and
the list <code class="docutils literal notranslate"><span class="pre">&lt;validation_datasets&gt;</span></code> constitutes the validation data.</p>
<p>In this validation mode, the validation datasets can be processed as a stream
by specifying <code class="docutils literal notranslate"><span class="pre">--streaming</span></code>. In this case, the validation instances are not
loaded into memory at once which allows to process bigger datasets.
The batch size of the streaming process can be specified with the optional
argument <code class="docutils literal notranslate"><span class="pre">--stream-batch</span> <span class="pre">&lt;size&gt;</span></code> (default value: 1000).</p>
</div>
</div>
</div>
<div class="section" id="graphical-user-interface">
<span id="diadem-gui"></span><h2>Graphical User Interface<a class="headerlink" href="#graphical-user-interface" title="Permalink to this headline">¶</a></h2>
<div class="section" id="model-performance-and-predictions">
<h3>Model Performance and Predictions<a class="headerlink" href="#model-performance-and-predictions" title="Permalink to this headline">¶</a></h3>
<p>DIADEM displays the performance evaluation and the predictions of the detection
model both on the training and validation datasets.
The predictions analysis is always available,
while the performance evaluation can be computed only when the data are
annotated.</p>
<p><strong>Performance.</strong>
The <em>Performance</em> tab displays the detection and the false alarm rates
for a given detection threshold.
The value of the detection threshold can be modified through a slider
to see the impact on the detection and false alarm rates.
The confusion matrix and the ROC curve are also displayed.
See <a class="reference internal" href="miscellaneous.detection_perf.html#misc-detection-perf-metrics"><span class="std std-ref">Detection Performance Metrics</span></a> for more information.</p>
<div class="figure align-center" id="id6">
<span id="performance-tab"></span><img alt="_images/performance.png" src="_images/performance.png" />
<p class="caption"><span class="caption-text">Performance Tab</span><a class="headerlink" href="#id6" title="Permalink to this image">¶</a></p>
</div>
<p><strong>Predictions.</strong>
The <em>Predictions</em> tab displays the histograms of the predicted probabilities of
maliciousness.
When annotations are available, the instances are grouped by label.</p>
<div class="figure align-center" id="id7">
<span id="predictions-tab"></span><img alt="_images/histograms.png" src="_images/histograms.png" />
<p class="caption"><span class="caption-text">Predictions Tab</span><a class="headerlink" href="#id7" title="Permalink to this image">¶</a></p>
</div>
</div>
<div class="section" id="model-behavior">
<h3>Model Behavior<a class="headerlink" href="#model-behavior" title="Permalink to this headline">¶</a></h3>
<p>DIADEM displays information about the global behavior of detection models.
This visualization allows to grasp how detection models make decisions
and to diagnose potential training biases.</p>
<p>It is currently implemented for linear (see <a class="reference internal" href="#linear-model-coeff"><span class="std std-ref">Features Coefficients of a Linear Model</span></a>)
and tree-based (see <a class="reference internal" href="#tree-model-importance"><span class="std std-ref">Features Importance of a Tree-based Model</span></a>) models.
DIADEM does not yet support model-agnostic interpretation methods.</p>
<p>These graphic depictions allow a focus on the most influential features
of the detection model.
Clicking on a given feature gives access to its descriptive statistics on the
training data (see <a class="reference internal" href="SecuML.stats.html#stats"><span class="std std-ref">Features Analysis</span></a>).
These statistics allow to understand why a feature has a significant impact on
decision-making, and may point out biases in the training dataset.</p>
<div class="figure align-center" id="id8">
<span id="linear-model-coeff"></span><a class="reference internal image-reference" href="_images/logistic_regression_coefficients.png"><img alt="_images/logistic_regression_coefficients.png" src="_images/logistic_regression_coefficients.png" style="width: 49%;" /></a>
<p class="caption"><span class="caption-text">Features Coefficients of a Linear Model</span><a class="headerlink" href="#id8" title="Permalink to this image">¶</a></p>
</div>
<div class="figure align-center" id="id9">
<span id="tree-model-importance"></span><a class="reference internal image-reference" href="_images/random_forest_importance.png"><img alt="_images/random_forest_importance.png" src="_images/random_forest_importance.png" style="width: 49%;" /></a>
<p class="caption"><span class="caption-text">Features Importance of a Tree-based Model</span><a class="headerlink" href="#id9" title="Permalink to this image">¶</a></p>
</div>
</div>
<div class="section" id="individual-predictions">
<h3>Individual Predictions<a class="headerlink" href="#individual-predictions" title="Permalink to this headline">¶</a></h3>
<p>DIADEM diagnosis interface also allows to examine individual predictions.
For example, the false positives and negatives can be reviewed
by clicking on the confusion matrix displayed by the <a class="reference internal" href="#performance-tab"><span class="std std-ref">Performance Tab</span></a>.</p>
<p>Besides, the <a class="reference internal" href="#predictions-tab"><span class="std std-ref">Predictions Tab</span></a> allows to analyze the instances
whose predicted probability is within a given range.
For instance, the instances close to the decision boundary
(probability of maliciousness close to 50%) can be reviewed
to understand why the detection model is undecided.
Moreover, the instances that have been misclassified with a high level of
confidence can be inspected to point out potential annotation errors, or help
finding new discriminating features.</p>
<p><strong>Description Panel</strong></p>
<p>DIADEM displays each instance in a <a class="reference internal" href="SecuML.SpecificVisu.html#instance-visu"><span class="std std-ref">Description panel</span></a>.
By default, all the values of the features of the instance are displayed.
Other visualizations specific to the detection problem may be more relevant to
analyze individual predictions. In order to address this need, SecuML enables
users to plug <a class="reference internal" href="SecuML.SpecificVisu.html#problem-specific-visu"><span class="std std-ref">problem-specific visualizations</span></a>.</p>
<p>If an interpretable model has been trained, DIADEM also displays
the features that have the most impact on the prediction
(see <a class="reference internal" href="#important-features"><span class="std std-ref">Most Important Features</span></a> ).
This visualization is easier to interpret than the previous one
since the features are sorted according to their impact in the decision-making
process.</p>
<div class="figure align-center" id="id10">
<span id="important-features"></span><a class="reference internal image-reference" href="_images/feature_weights.png"><img alt="_images/feature_weights.png" src="_images/feature_weights.png" style="width: 80%;" /></a>
<p class="caption"><span class="caption-text">Most Important Features</span><a class="headerlink" href="#id10" title="Permalink to this image">¶</a></p>
</div>
</div>
</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="SecuML.ILAB.html" class="btn btn-neutral float-right" title="ILAB: Interactive LABeling" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="SecuML.Experiments.html" class="btn btn-neutral float-left" title="Experiments" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2018, Anaël Beaugnon, Pierre Collet, Antoine Husson

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>